---
layout: post
title: "SIP各业务逻辑流程"
date: 2016-10-26
comments: false
categories: SIP
---

近期在跟踪SIP问题，顺道把各个业务流程记录于此，方便后续查阅.

* SIPA - SIP客户端A
* SIPB - SIP客户端B
* SERVER - SIP服务器

#### 注册流程
<pre>
SIPA                          SERVER
 |                               |
 |                               |
 |   --------REGISTER------->    |
 |                               |
 |   <---------401-----------    |
 |                               |
 |                               |
 |   -----REGISTER(Auth)---->    |
 |                               |
 |   <-----------OK----------    |
 |                               |
 |                               |
</pre>

#### 呼叫流程

<pre>

SIPA                          SERVER                           SIPB
 |								  |	                             |
 |								  |	                             |
 |   ---------INVITE-------->	  |	                             |
 |								  |	                             |
 |	 <---------Trying--------	  |	                             |
 |								  |	  ---------INVITE-------->   |
 |								  |	                             |
 |								  |	  <---------Trying--------   |
 |								  |	                             |
 |								  |	                             |
 |								  |	                             |
 |								  |	  <---------Ringing-------   |
 |								  |	                             |
 |	 <---------Ringing-------  	  |	                             |
 |								  |	                             |
 |								  |	  <-----------OK----------   |
 |								  |	                             |
 |	 <-----------OK----------	  |	                             |
 |								  |	                             |
 |	 -----------ACK---------> 	  |	                             |
 |								  |	  -----------ACK--------->   |
 |								  |	                             |
 |								  |	                             |
 |
</pre>